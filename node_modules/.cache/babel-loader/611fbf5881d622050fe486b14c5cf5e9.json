{"ast":null,"code":"import { toastr } from 'react-redux-toastr';\nimport axios from 'axios';\nimport consts from '../consts';\nexport function login(values) {\n  return submit(values, `${consts.OAPI_URL}/login`);\n}\nexport function signup(values) {\n  return submit(values, `${consts.OAPI_URL}/signup`);\n}\n\nfunction submit(values, url) {\n  return dispatch => {\n    debugger;\n    axios.post(url, values).then(resp => {\n      dispatch([{\n        type: 'USER_FETCHED',\n        payload: resp.data\n      }]);\n    }).catch(e => {\n      e.response.data.errors.forEach(error => toastr.error('Erro', error));\n    });\n  };\n}\n\nexport function logout() {\n  return {\n    type: 'TOKEN_VALIDATED',\n    payload: false\n  };\n}\nexport function validateToken(token) {\n  return dispatch => {\n    if (token) {\n      axios.post(`${consts.OAPI_URL}/validateToken`, {\n        token\n      }).then(resp => {\n        dispatch({\n          type: 'TOKEN_VALIDATED',\n          payload: resp.data.valid\n        });\n      }).catch(e => dispatch({\n        type: 'TOKEN_VALIDATED',\n        payload: false\n      }));\n    } else {\n      dispatch({\n        type: 'TOKEN_VALIDATED',\n        payload: false\n      });\n    }\n  };\n}","map":{"version":3,"sources":["/home/jhonattan/www/java-script/my-money-app/frontend/src/auth/authActions.js"],"names":["toastr","axios","consts","login","values","submit","OAPI_URL","signup","url","dispatch","post","then","resp","type","payload","data","catch","e","response","errors","forEach","error","logout","validateToken","token","valid"],"mappings":"AAAA,SAASA,MAAT,QAAuB,oBAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,OAAO,SAASC,KAAT,CAAeC,MAAf,EAAuB;AAC1B,SAAOC,MAAM,CAACD,MAAD,EAAU,GAAEF,MAAM,CAACI,QAAS,QAA5B,CAAb;AACH;AAED,OAAO,SAASC,MAAT,CAAgBH,MAAhB,EAAwB;AAC3B,SAAOC,MAAM,CAACD,MAAD,EAAU,GAAEF,MAAM,CAACI,QAAS,SAA5B,CAAb;AACH;;AAED,SAASD,MAAT,CAAgBD,MAAhB,EAAwBI,GAAxB,EAA6B;AACzB,SAAOC,QAAQ,IAAI;AACf;AACAR,IAAAA,KAAK,CAACS,IAAN,CAAWF,GAAX,EAAgBJ,MAAhB,EACKO,IADL,CACUC,IAAI,IAAI;AACVH,MAAAA,QAAQ,CAAC,CACL;AAAEI,QAAAA,IAAI,EAAE,cAAR;AAAwBC,QAAAA,OAAO,EAAEF,IAAI,CAACG;AAAtC,OADK,CAAD,CAAR;AAGH,KALL,EAMKC,KANL,CAMWC,CAAC,IAAI;AACRA,MAAAA,CAAC,CAACC,QAAF,CAAWH,IAAX,CAAgBI,MAAhB,CAAuBC,OAAvB,CACIC,KAAK,IAAIrB,MAAM,CAACqB,KAAP,CAAa,MAAb,EAAqBA,KAArB,CADb;AAEH,KATL;AAUH,GAZD;AAaH;;AAED,OAAO,SAASC,MAAT,GAAkB;AACrB,SAAO;AAAET,IAAAA,IAAI,EAAE,iBAAR;AAA2BC,IAAAA,OAAO,EAAE;AAApC,GAAP;AACH;AAED,OAAO,SAASS,aAAT,CAAuBC,KAAvB,EAA8B;AACjC,SAAOf,QAAQ,IAAI;AACf,QAAIe,KAAJ,EAAW;AACPvB,MAAAA,KAAK,CAACS,IAAN,CAAY,GAAER,MAAM,CAACI,QAAS,gBAA9B,EAA+C;AAAEkB,QAAAA;AAAF,OAA/C,EACKb,IADL,CACUC,IAAI,IAAI;AACVH,QAAAA,QAAQ,CAAC;AAAEI,UAAAA,IAAI,EAAE,iBAAR;AAA2BC,UAAAA,OAAO,EAAEF,IAAI,CAACG,IAAL,CAAUU;AAA9C,SAAD,CAAR;AACH,OAHL,EAIKT,KAJL,CAIWC,CAAC,IAAIR,QAAQ,CAAC;AAAEI,QAAAA,IAAI,EAAE,iBAAR;AAA2BC,QAAAA,OAAO,EAAE;AAApC,OAAD,CAJxB;AAKH,KAND,MAMO;AACHL,MAAAA,QAAQ,CAAC;AAAEI,QAAAA,IAAI,EAAE,iBAAR;AAA2BC,QAAAA,OAAO,EAAE;AAApC,OAAD,CAAR;AACH;AACJ,GAVD;AAWH","sourcesContent":["import { toastr } from 'react-redux-toastr'\nimport axios from 'axios'\nimport consts from '../consts'\n\nexport function login(values) {\n    return submit(values, `${consts.OAPI_URL}/login`)\n}\n\nexport function signup(values) {\n    return submit(values, `${consts.OAPI_URL}/signup`)\n}\n\nfunction submit(values, url) {\n    return dispatch => {\n        debugger\n        axios.post(url, values)\n            .then(resp => {\n                dispatch([\n                    { type: 'USER_FETCHED', payload: resp.data }\n                ])\n            })\n            .catch(e => {\n                e.response.data.errors.forEach(\n                    error => toastr.error('Erro', error))\n            })\n    }\n}\n\nexport function logout() {\n    return { type: 'TOKEN_VALIDATED', payload: false }\n}\n\nexport function validateToken(token) {\n    return dispatch => {\n        if (token) {\n            axios.post(`${consts.OAPI_URL}/validateToken`, { token })\n                .then(resp => {\n                    dispatch({ type: 'TOKEN_VALIDATED', payload: resp.data.valid })\n                })\n                .catch(e => dispatch({ type: 'TOKEN_VALIDATED', payload: false }))\n        } else {\n            dispatch({ type: 'TOKEN_VALIDATED', payload: false })\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}